namespace: wanthave  # Adjust if you use a different namespace

image:
  repository: registry.kub2.fh-joanneum.at/k8s/wanthave/backend
  tag: "" # Empty tag allows fallback to Chart.AppVersion
  pullPolicy: Always
  imagePullSecret: wanthave-argotoken # Ensure this secret exists in your new namespace

service:
  port: 8000
  targetPort: 8000

ingress:
  enabled: true
  className: nginx
  # CHANGE THIS: Use a unique domain for the API
  host: wanthave-api.kub2.fh-joanneum.at 
  tls:
    enabled: true
    secretName: wanthave-api-tls
    clusterIssuer: ""

replicaCount: 1

# Name of the Kubernetes secret containing sensitive env vars
# Create this secret manually or via kubectl before deploying
secretName: wanthave-secrets

# Environment variables for Django (non-sensitive)
appEnv:
  - name: DJANGO_ALLOWED_HOSTS
    value: "*"
  - name: DEBUG
    value: "False"
  - name: SQLITE_DB_PATH
    value: "/data/db.sqlite3"
  - name: REDIS_HOST
    value: "redis"  # Kubernetes service name for Redis
  - name: MEDIA_ROOT
    value: "/data/media"

# SQLite storage (Keep this for Backend)
persistence:
  enabled: true
  size: 1Gi
  mountPath: /data

# Payment polling configuration
# Used in VPN environments where webhooks cannot reach the backend
paymentPolling:
  enabled: true
  schedule: "*/1 * * * *"  # Every minute
  maxOrders: 100  # Max orders to check per run
  ageHours: 24    # Only check orders created within 24 hours
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "500m"