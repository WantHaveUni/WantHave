<div class="login-page">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Sign in</mat-card-title>
      <mat-card-subtitle>JWT auth via <code>/api/token/</code></mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      @if (isLoggedIn()) {
        <p class="info">
          Logged in as <strong>{{ username() }}</strong>. Use the logout button if you want to switch accounts.
        </p>
        <div class="actions">
          <button mat-stroked-button color="primary" (click)="logout()">Logout</button>
        </div>
      } @else {
        <form [formGroup]="form" (ngSubmit)="submit()" class="login-form">
          <mat-form-field appearance="outline">
            <mat-label>Username</mat-label>
            <input matInput formControlName="username" required />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Password</mat-label>
            <input matInput type="password" formControlName="password" required />
          </mat-form-field>

          <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid || loading">
            {{ loading ? 'Signing inâ€¦' : 'Sign in' }}
          </button>
        </form>
      }

      @if (error) {
        <p class="error">{{ error }}</p>
      }

      @if (success && !isLoggedIn()) {
        <p class="success">Login successful.</p>
      }
    </mat-card-content>
  </mat-card>
</div>
