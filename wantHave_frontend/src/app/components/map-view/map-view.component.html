<section class="map-container">
    <div class="map-header">
        <div class="headline">
            <p class="eyebrow">Browse WantHave</p>
            <h1>Map View</h1>
        </div>
        <div class="header-actions">
            <a mat-stroked-button routerLink="/products">‚Üê Back to List</a>
        </div>
    </div>

    @if (loading) {
    <div class="loading-state">
        <mat-progress-spinner diameter="40" mode="indeterminate"></mat-progress-spinner>
        <p>Loading products...</p>
    </div>
    } @else if (error) {
    <div class="error-state">
        <p>{{ error }}</p>
        <button mat-flat-button color="primary" (click)="fetchProducts()">Try again</button>
    </div>
    } @else if (products.length === 0) {
    <div class="empty-state">
        <p>No products with location data available.</p>
        <a mat-flat-button color="primary" routerLink="/products">Browse All Products</a>
    </div>
    }

    <div id="map" class="leaflet-map"></div>

    <div class="product-count">
        {{ products.length }} product{{ products.length !== 1 ? 's' : '' }} on map
    </div>
</section>